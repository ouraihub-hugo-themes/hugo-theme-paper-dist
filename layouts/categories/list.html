{{ define "main" }}
<div class="max-w-4xl mx-auto">
  <!-- Page Header -->
  <div class="mb-12">
    <h1 class="text-4xl md:text-5xl font-bold mb-4">All Categories</h1>
    <p class="text-lg text-muted">
      Browse {{ len .Site.Taxonomies.categories }} categories
    </p>
  </div>

  <!-- Categories Grid -->
  {{ $categories := .Site.Taxonomies.categories }} {{ if $categories }}
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-12">
    {{ range $categories }}
    <a
      href="{{ .Page.RelPermalink }}"
      class="group p-6 rounded-lg border border-border hover:border-accent hover:shadow-md hover:bg-accent/5 transition-all duration-200"
    >
      <div class="flex items-center justify-between mb-2">
        <h3
          class="text-xl font-semibold group-hover:text-accent transition-colors"
        >
          {{ .Page.Title }}
        </h3>
        <span
          class="px-2.5 py-1 rounded-full text-sm font-medium bg-accent/10 text-accent"
        >
          {{ len .Pages }}
        </span>
      </div>
      <p class="text-muted text-sm">
        {{ len .Pages }} article{{ if ne (len .Pages) 1 }}s{{ end }}
      </p>
    </a>
    {{ end }}
  </div>
  {{ else }}
  <div class="py-12 text-center">
    <p class="text-muted text-lg">No categories found.</p>
  </div>
  {{ end }}

  <!-- Popular Categories -->
  {{ $sorted := slice }} {{ range $categories }} {{ $sorted = $sorted | append .
  }} {{ end }} {{ range first 5 (sort $sorted "Weight" "desc") }}
  <section class="mt-12 pt-12 border-t border-border">
    <h2 class="text-2xl font-bold mb-6">{{ .Page.Title }}</h2>
    <div class="space-y-4">
      {{ range first 10 .Pages }} {{ partial "post-list-item.html" . }} {{ end
      }}
    </div>
    <a
      href="{{ .Page.RelPermalink }}"
      class="inline-block mt-6 text-accent hover:text-accent/75 transition-colors"
    >
      View all in {{ .Page.Title }} â†’
    </a>
  </section>
  {{ end }}
</div>
{{ end }}

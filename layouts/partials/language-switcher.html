{{- /*
  Language Switcher Component
  
  功能：
  - 检查当前页面是否有翻译版本
  - 如果有翻译，链接到翻译页面
  - 如果没有翻译，链接到另一语言首页
  - 显示语言代码（EN 或 中）
  - 添加 aria-label 和 title
  
  Requirements: 21.6
*/ -}}

{{- if hugo.IsMultilingual -}}
  {{- if .IsTranslated -}}
    {{- /* 当前页面有翻译版本 */ -}}
    {{- range .Translations -}}
      <a
        href="{{ .Permalink }}"
        class="focus-outline p-1 text-sm font-medium hover:text-accent"
        title="{{ i18n "language.switchTo" | default "Switch to" }} {{ .Language.LanguageName }}"
        aria-label="{{ i18n "language.switchTo" | default "Switch to" }} {{ .Language.LanguageName }}"
      >
        {{- if eq .Language.Lang "zh" -}}中{{- else -}}EN{{- end -}}
      </a>
    {{- end -}}
  {{- else -}}
    {{- /* 当前页面没有翻译版本，链接到另一语言的首页 */ -}}
    {{- range .Site.Languages -}}
      {{- if ne .Lang $.Language.Lang -}}
        {{- $homePage := $.Site.GetPage "/" -}}
        <a
          href="{{ $homePage.RelPermalink }}"
          class="focus-outline p-1 text-sm font-medium hover:text-accent"
          title="{{ i18n "language.switchTo" | default "Switch to" }} {{ .LanguageName }}"
          aria-label="{{ i18n "language.switchTo" | default "Switch to" }} {{ .LanguageName }}"
        >
          {{- if eq .Lang "zh" -}}中{{- else -}}EN{{- end -}}
        </a>
      {{- end -}}
    {{- end -}}
  {{- end -}}
{{- end -}}

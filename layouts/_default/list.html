{{- define "main" -}}
  {{- /* Breadcrumb */ -}}
  {{ partial "breadcrumb.html" . }}
  
  <main
    id="main-content"
    class="mx-auto w-full max-w-app px-4 pb-4"
    data-backurl="{{ .Permalink }}"
  >
    {{- /* Page Title */ -}}
    <h1 class="text-2xl font-semibold sm:text-3xl">
      {{ .Title }}
    </h1>
    
    {{- /* Page Description */ -}}
    {{- if .Description }}
      <p class="mt-2 mb-6 italic">{{ .Description }}</p>
    {{- else if eq .Kind "section" }}
      <p class="mt-2 mb-6 italic">All the articles I've posted.</p>
    {{- end }}
    
    {{- /* Posts List */ -}}
    <ul>
      {{- $paginator := .Paginate .Pages }}
      {{- range $paginator.Pages }}
        {{ partial "card.html" . }}
      {{- end }}
    </ul>
  </main>

  {{- /* Pagination */ -}}
  {{ partial "pagination.html" . }}

  {{- /* Back URL tracking script */ -}}
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const mainContent = document.querySelector("#main-content");
      const backUrl = mainContent?.dataset?.backurl;
      if (backUrl) {
        sessionStorage.setItem("backUrl", backUrl);
      }
    });
  </script>
{{- end -}}
